"use strict";(self.webpackChunkdatta_able_rv18_0_4=self.webpackChunkdatta_able_rv18_0_4||[]).push([[160],{8160:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var s=a(4702),l=a(2481),i=(a(8890),a(2791)),r=a(8695),o=a(2412),n=a(5279),d=a(9542),c=a(4047),h=a(3360),b=a(6487),m=a(8289),u=a(5648),p=a(1923),j=a(184);const x=(0,s.ZF)(m.k.firebaseConfig),y=(0,l.ad)(x);class g extends i.Component{constructor(e){super(e),this.componentDidMount=async()=>{this.context;const e=await(0,u.Ly)();this.setState({jobList:e},(()=>{this.setState({})}))},this.handleClose=()=>{this.setState({showModal:!1})},this.openModal=()=>{this.setState({showModal:!0})},this.state={datta:[{woNum:"John Doe",joblocation:"28",contact:"New York",trade:"1",nte:"2",ivrcode:"3",poNumb:"4",clientName:"5",submdate:"6",neededdate:"7",urgency:"8",callerName:"9",jobdescr:"10"}],itemToEdit:[{jobType:"",estimTechName:"",estimTechCon:"",estimDate:"",estimTime:"",estimCost:"",estimPaidby:"",estimPaymentAdress:"",jobDoneTechName:"",jobDoneTechCon:"",jobDoneDate:"",jobDoneTime:"",jobDoneCost:"",jobDonePaidby:"",jobDonePaymentAdress:"",jobDoneHours:"",techDescription:"",dispId:this.setState.selectAuser,suppliyer:"",otherSuppliyer:"",material:"",proffision:"",scheduleddate:"",currentuser:"teamleader"}],showselectdispatcher:!1,selectAuser:"Select a Dispatcher",selectedUser:{selectedtype:"Select Dispatcher"},woNum:"",joblocation:"",contact:"",trade:"",nte:"",ivrcode:"",poNumb:"",clientName:"",submdate:"",neededdate:"",urgency:"",callerName:"",jobdescr:"",jobList:[],showModal:!1,selectedMan:"",selectedDisp:"",selectedTeamLeader:"",selectedStatus:"",selectedUName:"Select Assignee",selectedUserClient:"Select Assignee",selectedIndex:"0"},this.handleFormSubmit=this.handleFormSubmit.bind(this)}async handleFormSubmit(e){e.preventDefault();const t={woNum:this.state.woNum,manager:this.state.selectedMan,teamLeader:this.state.selectedTeamLeader,dispatcher:this.state.selectedDisp,status:this.state.selectedStatus,assignedTo:this.state.selectedUName,assignedby:this.state.currentuser,jobData:{joblocation:this.state.joblocation,contact:this.state.contact,trade:this.state.trade,nte:this.state.nte,ivrcode:this.state.ivrcode,poNumb:this.state.poNumb,clientName:this.state.clientName,submdate:this.state.submdate,neededdate:this.state.neededdate,urgency:this.state.urgency,callerName:this.state.callerName,jobdescr:this.state.jobdescr,urgency:this.state.urgency},teamLeaderData:{},dispatcherData:{jobType:"",estimTechName:"",estimTechCon:"",estimDate:"",estimTime:"",estimCost:"",estimPaidby:"",estimPaymentAdress:"",jobDoneTechName:"",jobDoneTechCon:"",jobDoneDate:"",jobDoneTime:"",jobDoneHours:"",jobDoneCost:"",jobDonePaidby:"",jobDonePaymentAdress:"",dispId:"",suppliyer:"",otherSuppliyer:"",material:"",proffision:""}};(0,u.Zg)(t).then((async e=>{const t=(0,l.JU)(y,"Jobs",e);await(0,l.r7)(t,{jobId:e});const a=await(0,u.Ly)();console.log("const jobList = await getJobs();",a),this.setState({jobList:a})})),this.setState({datta:[...this.state.datta,t],woNum:"",joblocation:"",contact:"",trade:"",nte:"",ivrcode:"",poNumb:"",clientName:"",submdate:"",neededdate:"",urgency:"",callerName:"",jobdescr:""})}render(){const e=this.context,{showselectdispatcher:t}=this.state,{datta:a,woNum:s,joblocation:l,contact:i,trade:b,nte:m,ivrcode:x,poNumb:y,clientName:g,submdate:N,neededdate:v,urgency:w,callerName:C,jobdescr:f,showModal:D}=this.state;return(0,j.jsxs)("div",{children:[(0,j.jsx)("form",{onSubmit:this.handleFormSubmit,children:(0,j.jsx)("div",{children:(0,j.jsx)("div",{children:(0,j.jsxs)(r.Z,{className:"Recent-Users",tyle:{display:"flex",flexDirection:"row"},children:[(0,j.jsxs)("div",{tyle:{display:"flex",flexDirection:"row",wight:"100%"},children:[" ...................................................................................."," New Work Orders............................................................................................."]}),(0,j.jsx)(r.Z.Body,{className:"px-0 py-2",style:{display:"flex",flexDirection:"row",wight:"165%"},children:(0,j.jsx)(o.Z,{responsive:!0,hover:!0,children:(0,j.jsx)("tbody",{children:this.state.jobList.map(((e,t)=>"manager"===e.data.assignedby?(0,j.jsxs)("tr",{style:{display:"flex",flexDirection:"row",width:"100%"},children:[(0,j.jsxs)("td",{children:[(0,j.jsx)("a",{onClick:t=>{console.log("REJJJJEEEEECCTTTTTTTTTTT",t),(0,u.yu)(e.data.jobId).then((async()=>{const e=await(0,u.Ly)();console.log("const jobList = await getJobs();",e),this.setState({jobList:e})}))},href:p.Z.BLANK_LINK,className:"label theme-bg2 text-white f-12",children:"Reject"}),(0,j.jsx)("a",{href:p.Z.BLANK_LINK,onClick:t=>{console.log("AAAAPPPPRRRRREEEEEOOOOVVEEEE",e),this.setState({showselectdispatcher:!0,selectedjob:e})},className:"label theme-bg text-white f-12",children:"Approve"})]}),(0,j.jsx)("td",{children:e.data.woNum}),(0,j.jsx)("td",{children:e.data.jobData.joblocation}),(0,j.jsx)("td",{children:e.data.jobData.trade}),(0,j.jsx)("td",{children:e.data.jobData.nte}),(0,j.jsx)("td",{children:e.data.jobData.clientName}),(0,j.jsx)("td",{children:e.data.jobData.neededdate}),(0,j.jsx)("td",{children:e.data.jobData.urgency}),(0,j.jsx)("td",{children:e.data.jobData.jobdescr}),(0,j.jsx)("td",{style:{paddingTop:"3px",display:"flex"}})]},t):null))})})})]})})})}),(0,j.jsxs)("table",{style:{backgroundColor:"white"},className:"table mt-3",id:"tablepadding",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"WO numb"}),(0,j.jsx)("th",{children:"Job location"}),(0,j.jsx)("th",{children:"contact"}),(0,j.jsx)("th",{children:"Trade"}),(0,j.jsx)("th",{children:"NTE"}),(0,j.jsx)("th",{children:"IVR Code"}),(0,j.jsx)("th",{children:"Po Number"}),(0,j.jsx)("th",{children:"Client Name"}),(0,j.jsx)("th",{children:"Submitted date"}),(0,j.jsx)("th",{children:"Needed Date"}),(0,j.jsx)("th",{children:"Urgency"}),(0,j.jsx)("th",{children:"Caller Name"}),(0,j.jsx)("th",{children:"Job Description"})]})}),(0,j.jsx)("tbody",{children:this.state.jobList.map(((e,t)=>{if("TeamLeader"===e.data.assignedby)return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:e.data.woNum}),(0,j.jsx)("td",{children:e.data.jobData.joblocation}),(0,j.jsx)("td",{children:e.data.jobData.contact}),(0,j.jsx)("td",{children:e.data.jobData.trade}),(0,j.jsx)("td",{children:e.data.jobData.nte}),(0,j.jsx)("td",{children:e.data.jobData.ivrcode}),(0,j.jsx)("td",{children:e.data.jobData.poNumb}),(0,j.jsx)("td",{children:e.data.jobData.clientName}),(0,j.jsx)("td",{children:e.data.jobData.submdate}),(0,j.jsx)("td",{children:e.data.jobData.neededdate}),(0,j.jsx)("td",{children:e.data.jobData.urgency}),(0,j.jsx)("td",{children:e.data.jobData.callerName}),(0,j.jsx)("td",{children:e.data.jobData.jobdescr}),(0,j.jsx)("td",{style:{paddingTop:"3px",display:"flex"},children:(0,j.jsxs)(n.Z,{onSelect:async a=>{if(console.log("DropDownButtonOnChange",a),"1"===a){await(0,u.yu)(e.data.jobId);const t=await(0,u.Ly)();this.setState({jobList:t})}else"0"===a&&(this.openModal(),this.setState({itemToEdit:e.data,editItemIndex:t}))},title:"",children:[(0,j.jsx)(d.Z.Item,{eventKey:"0",children:"Edit"}),(0,j.jsx)(d.Z.Item,{eventKey:"1",children:"Delete"})]})})]},t)}))})]}),(0,j.jsxs)(c.Z,{show:t,onHide:this.handleClose,children:[(0,j.jsx)(c.Z.Header,{closeButton:!0,children:(0,j.jsx)(c.Z.Title,{children:"Edit WO"})}),(0,j.jsx)(c.Z.Body,{children:(0,j.jsx)("div",{style:{backgroundColor:"red",width:"100%"},children:(0,j.jsx)(n.Z,{onSelect:t=>{let a="";t.includes("user")&&(a=e.dispatchersList[t[0]],console.log("user new",a,t[0],t)),this.setState({selectedUser:a,selectedUName:a?a.name+a.lastName:""},(()=>{console.log("''''''''''''''''';;;;;;;;",a)}))},title:this.state.selectedUser?"".concat(this.state.selectedUser.name,"  ").concat(this.state.selectedUser.lastName):"Select a user",children:e.dispatchersList.map(((e,t)=>(0,j.jsxs)(d.Z.Item,{eventKey:"".concat(t,"user"),children:[e.name," ",e.lastName]},"".concat(e.id).concat(t,"user"))))})})}),(0,j.jsxs)(c.Z.Footer,{children:[(0,j.jsx)(h.Z,{variant:"primary",onClick:()=>{const e={assignedTo:this.state.selectedDisp};(0,u.bg)(this.state.selectedjob.data.dispId,e).then((async()=>{const e=await(0,u.Ly)();console.log("const jobList = await getJobs();",e),this.setState({jobList:e}),D=!1}))},children:"Submit"}),(0,j.jsx)(h.Z,{style:{width:"50%",marginTop:"8%"},variant:"secondary",onClick:()=>{this.handleClose()},children:"Close"})]})]}),(0,j.jsxs)(c.Z,{show:D,onHide:this.handleClose,children:[(0,j.jsx)(c.Z.Header,{closeButton:!0,children:(0,j.jsx)(c.Z.Title,{children:"Proccess WO"})}),(0,j.jsxs)(c.Z.Body,{children:[(0,j.jsxs)("div",{style:{width:"100%"},children:[(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"wo-number-label",children:"Wo #"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter wo Number...","aria-label":"WoNumber","aria-describedby":"woNumber-label",value:this.state.itemToEdit.woNum,onChange:e=>this.setState({woNum:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"job-location-label",children:"Job Location"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter job location...","aria-label":"JobLocation","aria-describedby":"joblocation-label",value:l,onChange:e=>this.setState({joblocation:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"contact-label",children:"Contact"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter phone number...","aria-label":"Contact","aria-describedby":"contact-label",value:i,onChange:e=>this.setState({contact:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"trade-label",children:"Trade"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter Trade type...","aria-label":"Trade","aria-describedby":"trade-label",value:b,onChange:e=>this.setState({trade:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"nte-label",children:"NTE"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter nte...","aria-label":"NTE","aria-describedby":"nte-label",value:m,onChange:e=>this.setState({nte:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"ivrcode-label",children:"Ivr Code"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter ivr code...","aria-label":"IvrCode","aria-describedby":"ivrcode-label",value:x,onChange:e=>this.setState({ivrcode:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"poNumb-label",children:"Po Number"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter Po Number...","aria-label":"PoNumber","aria-describedby":"ponumber-label",value:y,onChange:e=>this.setState({poNumb:e.target.value})})]})]}),(0,j.jsxs)("div",{style:{width:"100%"},children:[(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"clientname-label",children:"Client Name"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter client name...","aria-label":"ClientName","aria-describedby":"clientname-label",value:g,onChange:e=>this.setState({clientName:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"submdate-label",children:"Submitted Date"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"date",className:"form-control",placeholder:"Enter Submitted Date...","aria-label":"Submitteddate","aria-describedby":"submdate-label",value:N,onChange:e=>this.setState({submdate:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"neededdate-label",children:"Needed date"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"date",className:"form-control",placeholder:"Enter needed date...","aria-label":"NeededDate","aria-describedby":"neededdate-label",value:v,onChange:e=>this.setState({neededdate:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"urgency-label",children:"Urgency"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter Urgency...","aria-label":"Urgency","aria-describedby":"urgency-label",value:w,onChange:e=>this.setState({urgency:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"callername-label",children:"Caller Name"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter Caller Name...","aria-label":"CallerName","aria-describedby":"callername-label",value:C,onChange:e=>this.setState({callerName:e.target.value})})]}),(0,j.jsxs)("div",{style:{width:"100%"},className:"input-group mb-3",children:[(0,j.jsx)("span",{style:{width:"40%"},className:"input-group-text",id:"jobdescr-label",children:"Job Description"}),(0,j.jsx)("input",{style:{backgroundColor:"whitesmoke"},type:"text",className:"form-control",placeholder:"Enter Detailled job description...","aria-label":"JobDescription","aria-describedby":"jobdescr-label",value:f,onChange:e=>this.setState({jobdescr:e.target.value})})]})]})]}),(0,j.jsxs)(c.Z.Footer,{handleClose:!0,children:[(0,j.jsx)(h.Z,{variant:"secondary",onClick:this.handleClose,children:"Close"}),(0,j.jsx)(h.Z,{variant:"primary",onClick:this.handleFormSubmit,closeButton:!0,children:"Save Changes"})]})]})]})}}g.contextType=b.T;const N=g},8695:(e,t,a)=>{a.d(t,{Z:()=>E});var s=a(7462),l=a(3366),i=a(1694),r=a.n(i),o=a(2791),n=a(162),d=a(6543),c=a(7472),h=a(7338),b=["bsPrefix","className","variant","as"],m=o.forwardRef((function(e,t){var a=e.bsPrefix,i=e.className,d=e.variant,c=e.as,h=void 0===c?"img":c,m=(0,l.Z)(e,b),u=(0,n.vE)(a,"card-img");return o.createElement(h,(0,s.Z)({ref:t,className:r()(d?u+"-"+d:u,i)},m))}));m.displayName="CardImg",m.defaultProps={variant:null};const u=m;var p=["bsPrefix","className","bg","text","border","body","children","as"],j=(0,c.Z)("h5"),x=(0,c.Z)("h6"),y=(0,d.Z)("card-body"),g=(0,d.Z)("card-title",{Component:j}),N=(0,d.Z)("card-subtitle",{Component:x}),v=(0,d.Z)("card-link",{Component:"a"}),w=(0,d.Z)("card-text",{Component:"p"}),C=(0,d.Z)("card-header"),f=(0,d.Z)("card-footer"),D=(0,d.Z)("card-img-overlay"),Z=o.forwardRef((function(e,t){var a=e.bsPrefix,i=e.className,d=e.bg,c=e.text,b=e.border,m=e.body,u=e.children,j=e.as,x=void 0===j?"div":j,g=(0,l.Z)(e,p),N=(0,n.vE)(a,"card"),v=(0,o.useMemo)((function(){return{cardHeaderBsPrefix:N+"-header"}}),[N]);return o.createElement(h.Z.Provider,{value:v},o.createElement(x,(0,s.Z)({ref:t},g,{className:r()(i,N,d&&"bg-"+d,c&&"text-"+c,b&&"border-"+b)}),m?o.createElement(y,null,u):u))}));Z.displayName="Card",Z.defaultProps={body:!1},Z.Img=u,Z.Title=g,Z.Subtitle=N,Z.Body=y,Z.Link=v,Z.Text=w,Z.Header=C,Z.Footer=f,Z.ImgOverlay=D;const E=Z},7338:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(2791).createContext(null);s.displayName="CardContext";const l=s},5279:(e,t,a)=>{a.d(t,{Z:()=>u});var s=a(7462),l=a(3366),i=a(2791),r=a(2007),o=a.n(r),n=a(9542),d=a(5107),c=a(3516),h=["title","children","bsPrefix","rootCloseEvent","variant","size","menuAlign","menuRole","renderMenuOnMount","disabled","href","id"],b={id:o().any,href:o().string,onClick:o().func,title:o().node.isRequired,disabled:o().bool,menuAlign:c.r,menuRole:o().string,renderMenuOnMount:o().bool,rootCloseEvent:o().string,bsPrefix:o().string,variant:o().string,size:o().string},m=i.forwardRef((function(e,t){var a=e.title,r=e.children,o=e.bsPrefix,b=e.rootCloseEvent,m=e.variant,u=e.size,p=e.menuAlign,j=e.menuRole,x=e.renderMenuOnMount,y=e.disabled,g=e.href,N=e.id,v=(0,l.Z)(e,h);return i.createElement(n.Z,(0,s.Z)({ref:t},v),i.createElement(d.Z,{id:N,href:g,size:u,variant:m,disabled:y,childBsPrefix:o},a),i.createElement(c.Z,{align:p,role:j,renderOnMount:x,rootCloseEvent:b},r))}));m.displayName="DropdownButton",m.propTypes=b;const u=m},7472:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(7462),l=a(2791),i=a(1694),r=a.n(i);const o=function(e){return l.forwardRef((function(t,a){return l.createElement("div",(0,s.Z)({},t,{ref:a,className:r()(t.className,e)}))}))}}}]);
//# sourceMappingURL=160.ebd63149.chunk.js.map